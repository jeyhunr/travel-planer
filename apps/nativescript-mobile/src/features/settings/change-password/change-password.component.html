<ScrollView>
  <StackLayout class="bg-gradient-to-b from-amber-50 to-white min-h-full px-6 py-10 space-y-6">
    <ns-title [title]="'features.settings.changePasswords.title' | L"></ns-title>

    <GridLayout columns="*, auto" class="bg-white rounded-2xl shadow border border-amber-200">
      <TextField
        col="0"
        [hint]="'features.settings.changePasswords.current' | L"
        [(ngModel)]="currentPassword"
        [secure]="true"
        class="px-5 py-4 text-base text-gray-800"
      />
    </GridLayout>

    <GridLayout columns="*, auto" class="bg-white rounded-2xl shadow border border-amber-200">
      <TextField
        col="0"
        [hint]="'features.settings.changePasswords.new' | L"
        [(ngModel)]="newPassword"
        [secure]="true"
        class="px-5 py-4 text-base text-gray-800"
      />
    </GridLayout>

    <GridLayout columns="*, auto" class="bg-white rounded-2xl shadow border border-amber-200">
      <TextField
        col="0"
        [hint]="'features.settings.changePasswords.repeat' | L"
        [(ngModel)]="repeatPassword"
        [secure]="!showPassword"
        class="px-5 py-4 text-base text-gray-800"
      />
      <Button
        col="1"
        [text]="showPassword ? '🙈' : '👁️'"
        (tap)="showPassword = !showPassword"
        class="px-4 text-gray-500"
      ></Button>
    </GridLayout>

    <Button
      *ngIf="!isLoading()"
      [text]="'features.settings.changePasswords.save' | L"
      class="bg-amber-600 text-white text-center text-base font-bold py-4 rounded-2xl shadow-lg mt-4"
      (tap)="onChangePassword()"
    ></Button>
    <ActivityIndicator [busy]="isLoading()" />

    <Label
      *ngIf="showRequiredFields()"
      [text]="'features.settings.changePasswords.requiredFields' | L"
      class="text-sm text-red-500 text-center"
    ></Label>
    <Label *ngIf="errorMessage()" [text]="errorMessage()" class="text-sm text-red-500 text-center"></Label>
    <Label *ngIf="successMessage()" [text]="successMessage()" class="text-sm text-green-500 text-center"></Label>
  </StackLayout>
</ScrollView>
